kind: Pod
metadata:
  namespace: dask
spec:
  restartPolicy: Never
  containers:
  - image: ulissigroup/kubeflow:predictions
    imagePullPolicy: Always
    args: [dask-worker, --nthreads, '1',--nprocs,'1', --no-dashboard, --memory-limit,'16e9',--death-timeout, '60']
    name: dask
    env:
    - name: OMP_NUM_THREADS
      value: 1
    resources:
      limits:
        cpu: "2"
        memory: 12G
      requests:
        cpu: "2"
        memory: 12G
    volumeMounts:
    - mountPath: /home/jovyan
      name: workspace-ocp
      subPath: dask-temp
    - mountPath: /home/jovyan/ocp/configs
      name: workspace-ocp
      subPath: ocp/configs
    - mountPath: /home/jovyan/additional_python_imports/ocpmodels
      name: workspace-ocp
      subPath: ocp/ocpmodels
    - mountPath: /home/jovyan/ocp/data #Ensure that the mount path mirrors your local directory
      name: oc20data
    - mountPath: /home/jovyan/shared-scratch
      name: scratch-vol
  volumes:
  - name: oc20data
    persistentVolumeClaim:
      claimName: shared-datasets
  - name: workspace-ocp
    persistentVolumeClaim:
      claimName: workspace-ocp
  - name: scratch-vol
    persistentVolumeClaim:
      claimName: shared-scratch
      
      
      
