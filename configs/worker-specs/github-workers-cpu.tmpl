kind: Pod
metadata:
  namespace: dask
spec:
  restartPolicy: Never
  containers:
  - image: ulissigroup/kubeflow:predictions
    imagePullPolicy: Always
    args: [dask-worker, --nthreads, '1',--nprocs,'2', --no-dashboard, --memory-limit,'16 GiB',--death-timeout, '600']
    name: dask
    env:
    - name: OMP_NUM_THREADS
      value: 1
    - name: PYTHONPATH
      value: "/home/jovyan/ocp:/home/jovyan/catlas"
    resources:
      limits:
        cpu: "4"
        memory: 16G
      requests:
        cpu: "4"
        memory: 16G
    volumeMounts:
    - mountPath: /home/jovyan/ocp
      name: shared-scratch
      subPath: catlas_runners/${{ RUNNER_ID }}/ocp
    - mountPath: /home/jovyan/catlas
      name: shared-scratch
      subPath: catlas_runners/${{ RUNNER_ID }}/catlas
    - mountPath: /home/jovyan/shared-scratch
      name: shared-scratch
  volumes:
  - name: scratch-scratch
    persistentVolumeClaim:
      claimName: shared-scratch
